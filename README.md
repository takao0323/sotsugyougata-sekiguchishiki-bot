# 関口貴夫監修 卒業型ダイエットメンター
世界一の実績と、圧倒的な成功実例を持つ関口式ダイエットメンタープログラムを完全再現
>

[![Python](https://img.shields.io/badge/Python-3.11+-blue.svg)](https://www.python.org/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

## 📖 概要

**関口貴夫監修「卒業型ダイエットメンター」**は、世界チャンピオン・関口貴夫さんの指導歴30年の経験と科学的根拠を融合させた、あなた専属のAIダイエットメンタープログラムです。

✨ **科学的根拠 × 指導歴30年の経験** ✨

ダイエットの現場では「理論はこうだけど、現実は違うよね」ということがたくさんあります。そんな現場のノウハウを全て詰め込み、温かく前向きなメッセージであなたのダイエットをサポートします。

### 🎯 このbotの特徴

- **🧮 ハリス・ベネディクト方式（改良版）**：性別、年齢、身長、体重、活動レベルから科学的に基礎代謝と目標カロリーを自動計算
- **🖼️ 画像から自動カロリー・PFC計算**：食事の写真をアップロードするだけで、AI（Google Gemini）が自動的に栄養価を解析
- **2つのダイエットモード**：ライトダイエット（月2%減量）とハードダイエット（月4%減量）から選択可能
- **📊 リアルタイム目標比較**：毎日の摂取カロリー・PFCを目標値と比較して表示
- **科学的根拠に基づく減量ペース**：無理のない健康的なダイエットをサポート
- **前向きな励まし**：できたことに焦点を当て、温かいメッセージでサポート
- **完全パーソナライズ**：あなた専用の目標設定

## ✨ 主な機能

### 🤖 自動返信システム（NEW!）

**2億パターン以上**の返信メッセージで、ユーザーの質問・悩みに自動対応：
- **AI自動分類**：Google Geminiが質問内容を9つのカテゴリに自動分類
- **温かいメッセージ**：できたことに焦点を当てた前向きなサポート
- **LINE Bot対応**：LINE公式アカウントとの連携可能
- **カテゴリ**：食事・栄養、運動、モチベーション、停滞期、体重増加、時間管理、外食、睡眠、一般励まし

詳細は [RESPONSE_SYSTEM.md](RESPONSE_SYSTEM.md) を参照してください。

### 🍽️ 食事画像の自動解析

食事の写真やスクリーンショットをアップロードするだけで、AIが以下を自動計算：
- **総カロリー**
- **タンパク質（P）**
- **脂質（F）**
- **炭水化物（C）**
- **PFCバランス比率**

もちろん、従来通り手動入力も可能です。

### 💰 料金プラン

- **月額990円**：継続課金制（いつでも解約可能）

### 🎯 2つのダイエットモード

#### 1. ライトダイエット
- 月に体重の**2%**ペースで減量
- 無理なく続けたい方におすすめ
- リバウンドしにくい健康的なペース
- 基礎代謝を維持しながら痩せる

#### 2. ハードダイエット
- 月に体重の**4%**ペースで減量
- 短期間で結果を出したい方におすすめ
- より厳しい食事管理が必要
- 高いモチベーションが求められる

### 📊 PFCバランス管理とビジュアル化

- **理想的な栄養バランス**：P:30% / F:20% / C:50%
- **比較表形式**：実際の摂取量と目標値を見やすい表で表示
- **グラフ自動生成**：カロリーとPFCの比較グラフを自動生成
  - 左側：カロリー比較（実際 vs 目標）
  - 右側：PFC比較（タンパク質・脂質・炭水化物）
  - 棒グラフで視覚的に差異を確認可能
  - PNG画像として保存（`nutrition_comparison_{名前}.png`）

### 💬 励ましメッセージ

- 「できたこと」に焦点を当てた前向きなメッセージ
- 小さな進歩を認めて褒めるコーチングスタイル
- 無理をさせず、継続を大切にする姿勢

### 📬 メンターからの手紙（週刊・月間レポート）

**NEW！** プログラム期間中、定期的にメンターからの手紙が届きます：

#### 週刊レポート（7日ごと）
- **7日目、14日目、21日目...** に自動生成
- この1週間の体重変化の分析
- 運動の継続状況（週何日運動したか）
- 平均摂取カロリーの評価
- メンターからの温かい励ましのメッセージ
- **自動保存**：`weekly_report_{名前}_week{週番号}_{日時}.txt`

#### 月間レポート（30日ごと）
- **30日目、60日目、90日目...** に自動生成
- 1ヶ月間の詳細な体重変化分析
  - 開始時 → 現在の体重変化
  - 減量ペースの評価（2-4%が理想）
- 運動の継続率（週何%運動したか）
- 平均カロリー・PFCバランスの分析
- 体重が減少した日数のカウント
- より詳細なメンターからのメッセージ
- 来月への展望とアドバイス
- **自動保存**：`monthly_report_{名前}_month{月番号}_{日時}.txt`

#### レポートの特徴
- **手紙形式**：メンターからの温かい手紙として作成
- **成果の説明**：データに基づく客観的な分析
- **頑張りの応援**：継続していることを認めて褒める
- **寄り添うアドバイス**：引き続き効果を出すための具体的なアドバイス
- **柔軟な評価**：完璧を求めず、80点で十分というスタンス

## 🚀 インストール

### 必要な環境

- Python 3.11以上
- Google Gemini API キー（無料枠あり）
- LINE Messaging API（LINE Bot連携時のみ）

### セットアップ

1. リポジトリをクローン
```bash
git clone https://github.com/yourusername/sotsugyougata-sekiguchishiki-bot.git
cd sotsugyougata-sekiguchishiki-bot
```

2. 必要なライブラリをインストール
```bash
# 基本機能
pip install google-generativeai pillow matplotlib

# LINE Bot連携（オプション）
pip install line-bot-sdk flask
```

3. Google Gemini APIキーを取得
   - [Google AI Studio](https://makersuite.google.com/app/apikey) でAPIキーを取得
   - 環境変数に設定（推奨）:
   ```bash
   export GEMINI_API_KEY='your-api-key-here'
   ```
   - または、プログラム起動時に入力することも可能

4. プログラムを実行

**ダイエットトラッキング（メインプログラム）：**
```bash
cd sekiguchi_bot
python3 main.py
```

**自動返信システムのテスト：**
```bash
cd sekiguchi_bot
python3 response_generator.py
```

## 📱 使い方

### プログラムの流れ

1. **プラン料金の確認**（月額990円プラン）
2. **プロフィール入力**
   - 名前、性別、年齢、身長
   - **活動レベル選択**：5段階から選択
   - **ダイエットモード選択**：ライトダイエット（月2%）またはハードダイエット（月4%）
   - 現在の体重、目標体重
3. **科学的な目標設定**
   - ハリス・ベネディクト方式で基礎代謝（BMR）と総消費カロリー（TDEE）を計算
   - 個別の目標カロリーとPFCバランスを自動設定
4. **日々の報告**（プラン期間中）
   - 体重、運動を入力
   - **食事入力方法を選択**：
     - **🖼️ 画像アップロード**：食事の写真をアップロードして自動計算
     - **⌨️ 手動入力**：カロリー・PFCを手動で入力
5. **フィードバック**
   - **比較表とグラフ自動生成**：カロリー・PFCの実際と目標の比較
   - 体重変化の分析
   - 選択したダイエットモードに応じた励まし
6. **📬 メンターからの手紙**（定期的に自動生成）
   - **週刊レポート**：7日ごとに1週間の振り返り
   - **月間レポート**：30日ごとに1ヶ月の詳細分析
   - レポートはファイルとして自動保存

### 使用例

#### 画像アップロードで食事を記録

```
【食事】食事の入力方法を選択してください
1. 画像をアップロードして自動計算
2. 手動で入力
> 1

【食事画像のアップロード】
食事の写真・スクリーンショットのパスを入力してください
（例: /home/user/Pictures/meal.jpg）
> /home/user/meal.jpg

🔍 画像を解析中...
✅ 解析が完了しました！

✅ 解析完了！
📝 食事: 鶏胸肉のソテー、ブロッコリー、玄米ご飯
🔥 カロリー: 520kcal
💪 P: 45.0g / 🥑 F: 8.0g / 🍚 C: 65.0g
```

#### フィードバック例

```
【ダイエットメンターからのフィードバック】
============================================================

======================================================================
【栄養素比較表】
======================================================================
項目         実際            目標            差異
----------------------------------------------------------------------
カロリー         1520kcal      1496kcal       +24kcal ( +1.6%)
タンパク質       115.0g         112.2g          +2.8g   ( +2.5%)
脂質              35.0g          33.2g          +1.8g   ( +5.4%)
炭水化物         185.0g         187.0g          -2.0g   ( -1.1%)
======================================================================

📊 栄養比較グラフを保存しました: nutrition_comparison_太郎.png

📊 今日の評価:
  🎯 カロリー: 目標ピッタリです！素晴らしい👍
  📈 PFCバランス: P30% / F21% / C49%
  🎯 理想バランス: P30% / F20% / C50%

📊 体重変化: -0.3kg減 👍
素晴らしい！目標まであと2.5kgです。

🎯 太郎さんへ: ライトダイエット、順調に進んでいますよ！

✨ 良かった点:
  • 太郎さん、今日も記録をつけてくれてありがとう！これが継続の第一歩です
  • 「30分ジョギング」をやったこと、素晴らしいです！
  • 毎日体重を測って記録する習慣、これがとても大切です！

💡 改善ポイント（1つだけ！）:
  • タンパク質を意識して摂ると、筋肉が維持されやすくなります

🔥 明日への一言:
  継続は力なり！明日も一緒に頑張りましょう！
```

#### 週刊レポート例

```
🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉

                    📬 週刊レポート 📬

🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉🎉

======================================================================
📬 メンターからの手紙 📬
【第1週 週刊レポート】
======================================================================

太郎さんへ

第1週、お疲れさまでした。
メンターとして、太郎さんのこの1週間の頑張りを振り返ります。

【体重の変化】
この1週間で0.8kg減少しました。
素晴らしい成果です！太郎さんの努力が数字に表れていますね。
この調子で、無理なく続けていきましょう。

【運動の継続状況】
この1週間で4日運動されました。
週3-4回の運動、理想的なペースです。この調子で続けましょう。

【食事の状況】
この1週間の平均摂取カロリーは1520kcalでした。
（目標: 1496kcal）

目標カロリーに対して±10%以内、完璧です！
この精度で続けられれば、確実に結果がついてきます。

【メンターからのメッセージ】

太郎さん、この1週間も本当によく頑張りましたね。

ダイエットは一直線には進みません。
良い日もあれば、思うようにいかない日もあります。
でも、それが普通なんです。

大切なのは、完璧を目指すことではなく、
諦めずに続けることです。

来週も、あなたのペースで大丈夫です。

いつも太郎さんのことを応援しています。
一緒に、目標に向かって進んでいきましょう！

💪 ファイト！

― ダイエットメンターより
======================================================================

📄 レポートを保存しました: weekly_report_太郎_week1_20250312_143025.txt
```

#### 月間レポート例

```
🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟

                    📬 月間レポート 📬

🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟🌟

======================================================================
📬 メンターからの手紙 📬
【第1ヶ月 月間レポート】
======================================================================

太郎さんへ

早いもので、もう1ヶ月が経ちました。
メンターとして、太郎さんのこの1ヶ月間の成長を
じっくり振り返りたいと思います。

【この1ヶ月の体重変化】
開始時: 75.0kg → 現在: 72.3kg
変化: -2.7kg（-3.6%）

この1ヶ月で2.7kg減少しました。
本当に素晴らしい成果です！

月に体重の3.6%減、理想的なペースです。
この範囲であれば、リバウンドのリスクも低く、
健康的に減量できています。

【運動の継続状況】
運動した日数: 18日 / 30日（60%）

良い継続率です。
週3-4回のペースで運動できているということですね。
このペースなら無理なく続けられます。

【食事の状況】
平均摂取カロリー: 1510kcal/日
目標カロリー: 1496kcal/日

平均PFCバランス:
  タンパク質(P): 113.5g
  脂質(F): 33.8g
  炭水化物(C): 186.2g

素晴らしい！目標に対して±10%以内です。
食事管理がしっかりできていますね。

【この1ヶ月の分析】
体重が減少した日: 20日
着実に前進している証拠です。

【メンターからのメッセージ】

太郎さん、この1ヶ月間、本当にお疲れさまでした。

数字に表れる成果も大切ですが、
それ以上に大切なのは、この1ヶ月間、
太郎さんが諦めずに続けてきたという事実です。

継続は、誰にでもできそうで、実は一番難しいこと。
それを成し遂げている太郎さんは、
もう既に大きな成功を収めているんです。

来月も、今月と同じように、
あなたのペースで進んでいきましょう。

完璧を目指す必要はありません。
80点で十分。80点を継続することが、
100点を一度取るよりも遥かに価値があります。

太郎さんなら、必ず目標に辿り着けます。
私はそれを確信しています。

来月も、一緒に頑張りましょう！
いつも太郎さんのことを応援しています。

💪 ファイト！

― ダイエットメンターより
======================================================================

📄 レポートを保存しました: monthly_report_太郎_month1_20250312_143025.txt
```

## 🔬 技術スタック

- **Python 3.11+**
- **Google Gemini API** - 食事画像解析 & 質問自動分類
- **PIL (Pillow)** - 画像処理
- **matplotlib** - グラフ生成（将来実装予定）
- **LINE Messaging API** - LINE Bot連携（オプション）
- **Flask** - Webサーバー（LINE Bot用）

## 📊 科学的根拠

### ハリス・ベネディクト方式（改良版）によるカロリー計算

ダイエットメンターは、科学的に証明されたハリス・ベネディクト方式（改良版）を採用し、あなた専用の目標カロリーを自動計算します。

#### 計算方法

1. **基礎代謝量（BMR）の計算**
   - 男性：(13.397×体重kg)+(4.799×身長cm)-(5.677×年齢)+88.362
   - 女性：(9.247×体重kg)+(3.098×身長cm)-(4.330×年齢)+447.593

2. **活動レベル係数の適用**
   - ① 低い：座り仕事中心（係数1.2）
   - ② やや低い：日常生活+週1回程度運動（係数1.375）
   - ③ 中程度：週3回トレーニング（係数1.55）
   - ④ 高い：週4~5回トレーニング（係数1.725）
   - ⑤ 非常に高い：肉体労働+週5回以上トレーニング（係数1.9）

3. **総消費カロリー（TDEE）の計算**
   - TDEE = BMR × 活動レベル係数

4. **目標摂取カロリーの決定**
   - ダイエット目的：TDEE - カロリー不足分
   - カロリー不足分 = (月間減量目標 × 7200kcal) ÷ 30日

5. **PFCバランスの自動計算**
   - タンパク質（P）：目標カロリーの30%
   - 脂質（F）：目標カロリーの20%
   - 炭水化物（C）：目標カロリーの50%

#### 調整機能

1週間で体重に変化がない場合は、目標カロリーをマイナス150kcal調整します。

### ダイエットモードの設定理由

#### ライトダイエット（月2%）
- **基礎代謝を維持**：代謝の低下を最小限に抑える
- **筋肉量を保持**：筋肉の分解を防ぐ
- **リバウンドしにくい**：ホメオスタシスの影響を受けにくい
- **継続しやすい**：無理のないペースで長続きする

#### ハードダイエット（月4%）
- **短期間で結果が出る**：モチベーション維持に効果的
- **集中的な取り組み**：明確な目標に向けて集中できる
- **注意点**：4%を超えると体が飢餓状態と判断し、代謝が低下する可能性

### PFCバランス（P:30% F:20% C:50%）

- **P（タンパク質）30%**：筋肉維持、代謝サポート
- **F（脂質）20%**：ホルモン生成、細胞膜構成
- **C（炭水化物）50%**：エネルギー源、脳の栄養

## 👨‍🏫 関口貴夫について

**世界チャンピオン・関口貴夫**は、49歳で世界大会優勝という偉業を成し遂げた伝説的なボディビルダー・トレーナーです。

### 主な経歴・実績
- **指導歴30年**：数千人以上を指導してきた実績
- **健康体力づくり事業財団認定・健康運動指導士**
- **IFBBアーノルドクラシック世界大会優勝**
- **文部科学大臣表彰**
- **JBBFオールジャパン優勝×2回**
- **ジャパンカップ優勝**
- **JBBF関東オーバーオール優勝** 他多数

### 関口式の特徴
関口貴夫さんのコーチングは、科学的根拠に基づきながらも、30年の現場経験から得た実践的なノウハウが詰まっています。「理論通りにいかない現実」を熟知しているからこそ、一人ひとりに寄り添った指導が可能です。

## 🎨 コーチングスタイル

ダイエットメンターは、以下のコーチングスタイルでサポートします：

1. **できたことに焦点を当てる**
2. **小さな進歩を認めて褒める**
3. **無理をさせない**
4. **継続の大切さを説く**
5. **前向きで温かいメッセージ**

## ⚠️ 注意事項

- このプログラムは健康管理の補助ツールであり、医療アドバイスではありません

- Google Gemini APIの無料枠には制限があります
- AI推定のカロリー・PFC値は目安です。より正確な値が必要な場合は手動入力をご利用ください

## 🔑 APIキーについて

### Google Gemini API（無料枠）

- [Google AI Studio](https://makersuite.google.com/app/apikey)で無料で取得可能
- 無料枠：月間15リクエスト/分、100万トークン/月
- 本プログラムでの使用は無料枠内で十分です

## 📂 ファイル構成

```
sekiguchi_bot/
├── main.py                    # メインプログラム（ダイエットトラッキング）
├── food_analyzer.py           # 食事画像解析モジュール
├── message_templates.py       # 自動返信メッセージテンプレート
├── response_generator.py      # 自動返信生成システム
└── line_bot_example.py        # LINE Bot連携サンプルコード

RESPONSE_SYSTEM.md             # 自動返信システムの詳細ドキュメント
README.md                      # このファイル

# 生成されるファイル
nutrition_comparison_{名前}.png             # カロリー・PFC比較グラフ（日々更新）
weekly_report_{名前}_week{週番号}_{日時}.txt   # 週刊レポート（7日ごと自動生成）
monthly_report_{名前}_month{月番号}_{日時}.txt # 月間レポート（30日ごと自動生成）
weight_data_{名前}.csv                     # 体重データ（将来実装予定）
weight_graph_{名前}.png                    # 体重グラフ（将来実装予定）
profile_{名前}.json                        # プロフィール情報（将来実装予定）
```

## 📝 ライセンス

MIT License

## 🙏 謝辞

このプロジェクトは、世界チャンピオン・関口貴夫さん監修のもと、「誰でも何歳からでも変われる」というメッセージと、科学的根拠に基づく健康的なダイエット、そして前向きなコーチングスタイルの重要性を、より多くの人に届けることを目指しています。

---

**Let's start your transformation journey! 💪**

